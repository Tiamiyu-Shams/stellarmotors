{% extends "base.html" %}
{% block title %}Edit Car{% endblock %}

{% block content %}
<div class="max-w-3xl mx-auto bg-white p-6 rounded shadow">

  <h2 class="text-2xl font-bold mb-6">Edit Car</h2>

  <form method="POST" enctype="multipart/form-data" class="space-y-4">

    <input name="title" value="{{ car.title }}" class="w-full border p-2 rounded" required>

    <textarea name="description" class="w-full border p-2 rounded">{{ car.description }}</textarea>

    <input name="price" type="number" value="{{ car.price }}" class="w-full border p-2 rounded">

    <input name="category" value="{{ car.category }}" class="w-full border p-2 rounded">

    <input name="mileage" value="{{ car.mileage }}" class="w-full border p-2 rounded">

    <input name="body_condition" value="{{ car.body_condition }}" class="w-full border p-2 rounded">

    <input name="fuel_efficiency" value="{{ car.fuel_efficiency }}" class="w-full border p-2 rounded">

    <input name="engine_performance" value="{{ car.engine_performance }}" class="w-full border p-2 rounded">

    <!-- Seller -->
    <select name="seller_id" class="w-full border p-2 rounded">
      {% for s in sellers %}
      <option value="{{ s.id }}" {% if s.id == car.seller_id %}selected{% endif %}>
        {{ s.name }}
      </option>
      {% endfor %}
    </select>

    <!-- Main Image -->
    <img src="{{ car.main_image }}" class="h-40 w-full object-cover rounded border">
    <input type="file" name="main_image">

    <!-- Existing Extra Images -->
    {% if images %}
    <div class="grid grid-cols-4 gap-3">
      {% for img in images %}
      <div>
        <img src="{{ img.image_path }}" class="h-24 object-cover rounded">
        <a href="{{ url_for('admin.delete_car_image', image_id=img.id, car_id=car.id) }}"
           class="text-xs text-red-600">Delete</a>
      </div>
      {% endfor %}
    </div>
    {% endif %}

    <input type="file" name="images" multiple>

    <button class="bg-blue-600 text-white px-4 py-2 rounded">Update Car</button>

  </form>
</div>
{% endblock %}
